# 中间件

![](http://7xojpa.com1.z0.glb.clouddn.com/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/50e52ac0e3ec966fde05eef47ae12fc7.png)

- 用use方法导入中间件，新的中间件加入pipeline的尾端
- 前一个作为后一个的输入 每一个中间件可以是异步的，但所有的中间执行是顺序执行的
- 通过不调用callback方法，怎可以不执行下一个中间件函数或者传一个error给callback方法。错误处理会触发错误处理中间件

数据处理没有严格的规则，但是有以下策略

1. 通过给数据增加属性或方法来扩展数据
2. 通过某种处理来替换数据
3. 保持数据的不变性 每次返回一个新的复制



